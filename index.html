<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title> Trade Journal</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1> Trade Journal</h1>
    <div class="top-bar">
      <button id="prevMonth" class="nav-btn">‚Üê</button>
      <h2 id="monthYear"></h2>
      <button id="nextMonth" class="nav-btn">‚Üí</button>
      <button id="themeToggle" class="theme-btn">üåì</button>
    </div>
  </header>

  <main>
    <div id="calendar" class="calendar"></div>
  </main>

  <script>
    const calendar = document.getElementById("calendar");
    const monthYear = document.getElementById("monthYear");
    const themeToggle = document.getElementById("themeToggle");

    let currentDate = new Date();

    // ========== THEME MODE ==========
    themeToggle.onclick = () => {
      document.body.classList.toggle("dark");
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    };
    if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark");

    // ========== CALENDAR RENDER ==========
    function renderCalendar(date) {
      calendar.innerHTML = "";
      const year = date.getFullYear();
      const month = date.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      const monthNames = [
        "January","February","March","April","May","June",
        "July","August","September","October","November","December"
      ];
      monthYear.textContent = `${monthNames[month]} ${year}`;

      // Empty cells for offset
      for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement("div");
        empty.classList.add("day", "empty");
        calendar.appendChild(empty);
      }

      // Days
      for (let d = 1; d <= daysInMonth; d++) {
        const day = document.createElement("div");
        day.classList.add("day");
        day.textContent = d;
        day.onclick = () => {
          const dateStr = `${year}-${String(month + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;
          window.location.href = `day.html?date=${dateStr}`;
        };
        calendar.appendChild(day);
      }
    }

    document.getElementById("prevMonth").onclick = () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar(currentDate);
    };
    document.getElementById("nextMonth").onclick = () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar(currentDate);
    };

    renderCalendar(currentDate);
  </script>
</body>
</html>
