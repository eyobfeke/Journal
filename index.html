<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trade Journal</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>📊 Trade Journal</h1>
    <div class="month-nav">
      <button id="prevMonth">◀</button>
      <h2 id="monthYear">October 2025</h2>
      <button id="nextMonth">▶</button>
      <button id="themeToggle" class="theme-btn">🌙</button>
    </div>
  </header>

  <main>
    <div class="calendar" id="calendar"></div>
  </main>

  <footer>
    <p>Made with ❤️ using GitHub Pages</p>
  </footer>

  <script>
    // === Calendar Setup ===
    const calendar = document.getElementById('calendar');
    const monthYear = document.getElementById('monthYear');
    const themeToggle = document.getElementById('themeToggle');
    const now = new Date();

    let currentMonth = now.getMonth();
    let currentYear = now.getFullYear();

    function renderCalendar() {
      calendar.innerHTML = '';
      const firstDay = new Date(currentYear, currentMonth, 1);
      const lastDay = new Date(currentYear, currentMonth + 1, 0);
      const monthName = firstDay.toLocaleString('default', { month: 'long' });

      monthYear.textContent = `${monthName} ${currentYear}`;

      // Fill blanks before 1st day
      for (let i = 0; i < firstDay.getDay(); i++) {
        const empty = document.createElement('div');
        calendar.appendChild(empty);
      }

      // Fill days
      for (let d = 1; d <= lastDay.getDate(); d++) {
        const dayCell = document.createElement('div');
        dayCell.textContent = d;
        dayCell.addEventListener('click', () => {
          const date = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
          window.location.href = `daily.html?date=${date}`;
        });
        calendar.appendChild(dayCell);
      }
    }

    // === Month Navigation ===
    document.getElementById('prevMonth').addEventListener('click', () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar();
    });

    document.getElementById('nextMonth').addEventListener('click', () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar();
    });

    // === Theme Toggle ===
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      themeToggle.textContent = isDark ? '☀️' : '🌙';
    });

    // === Keep Theme After Reload ===
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
      themeToggle.textContent = '☀️';
    }

    // === Render Calendar Initially ===
    renderCalendar();
  </script>
</body>
</html>
